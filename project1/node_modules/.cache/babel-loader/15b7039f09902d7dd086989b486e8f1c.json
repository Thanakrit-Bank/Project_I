{"ast":null,"code":"import bisect from \"./bisect.js\";\nexport default function (objects) {\n  var indexesByArc = {},\n      // arc index -> array of object indexes\n  neighbors = objects.map(function () {\n    return [];\n  });\n\n  function line(arcs, i) {\n    arcs.forEach(function (a) {\n      if (a < 0) a = ~a;\n      var o = indexesByArc[a];\n      if (o) o.push(i);else indexesByArc[a] = [i];\n    });\n  }\n\n  function polygon(arcs, i) {\n    arcs.forEach(function (arc) {\n      line(arc, i);\n    });\n  }\n\n  function geometry(o, i) {\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(function (o) {\n      geometry(o, i);\n    });else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n  }\n\n  var geometryType = {\n    LineString: line,\n    MultiLineString: polygon,\n    Polygon: polygon,\n    MultiPolygon: function MultiPolygon(arcs, i) {\n      arcs.forEach(function (arc) {\n        polygon(arc, i);\n      });\n    }\n  };\n  objects.forEach(geometry);\n\n  for (var i in indexesByArc) {\n    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n      for (var k = j + 1; k < m; ++k) {\n        var ij = indexes[j],\n            ik = indexes[k],\n            n;\n        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n      }\n    }\n  }\n\n  return neighbors;\n}","map":{"version":3,"names":["bisect","objects","indexesByArc","neighbors","map","line","arcs","i","forEach","a","o","push","polygon","arc","geometry","type","geometries","geometryType","LineString","MultiLineString","Polygon","MultiPolygon","indexes","m","length","j","k","ij","ik","n","splice"],"sources":["C:/Users/Administrator/Desktop/Project_I/project1/node_modules/topojson-client/src/neighbors.js"],"sourcesContent":["import bisect from \"./bisect.js\";\r\n\r\nexport default function(objects) {\r\n  var indexesByArc = {}, // arc index -> array of object indexes\r\n      neighbors = objects.map(function() { return []; });\r\n\r\n  function line(arcs, i) {\r\n    arcs.forEach(function(a) {\r\n      if (a < 0) a = ~a;\r\n      var o = indexesByArc[a];\r\n      if (o) o.push(i);\r\n      else indexesByArc[a] = [i];\r\n    });\r\n  }\r\n\r\n  function polygon(arcs, i) {\r\n    arcs.forEach(function(arc) { line(arc, i); });\r\n  }\r\n\r\n  function geometry(o, i) {\r\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\r\n    else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\r\n  }\r\n\r\n  var geometryType = {\r\n    LineString: line,\r\n    MultiLineString: polygon,\r\n    Polygon: polygon,\r\n    MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\r\n  };\r\n\r\n  objects.forEach(geometry);\r\n\r\n  for (var i in indexesByArc) {\r\n    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\r\n      for (var k = j + 1; k < m; ++k) {\r\n        var ij = indexes[j], ik = indexes[k], n;\r\n        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\r\n        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\r\n      }\r\n    }\r\n  }\r\n\r\n  return neighbors;\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}