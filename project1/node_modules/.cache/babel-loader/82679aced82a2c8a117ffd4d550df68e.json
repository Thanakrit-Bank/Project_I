{"ast":null,"code":"import _slicedToArray from \"D:/Project/Mix_Project/Project_I/project1/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"D:\\\\Project\\\\Mix_Project\\\\Project_I\\\\project1\\\\src\\\\components\\\\GridData.jsx\",\n    _s = $RefreshSig$();\n\nimport { GeoJSON, Popup, FeatureGroup } from 'react-leaflet';\nimport React, { useState, useEffect } from 'react';\nimport legendData from './../data/dataLegend';\nimport * as turf from '@turf/turf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction GridData(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      shp = _useState4[0],\n      setShp = _useState4[1];\n\n  var url_grid = 'http://127.0.0.1:5000/get_spei/'.concat(props.pName).concat('&1902-02');\n  var url_shp = 'http://127.0.0.1:5000/get_province/'.concat(props.pName);\n  var interval = (legendData.spei.max - legendData.spei.min) / 8;\n  var twoDegit = parseFloat(interval).toFixed(2);\n  useEffect(function () {\n    setData([]);\n    fetchData(url_grid, url_shp);\n    console.log(url_grid);\n  }, [props.pName]);\n\n  function fetchData(url_grid, url_shp) {\n    var reqOptions = {\n      method: \"get\",\n      headers: {\n        \"x-access-token\": \"test\"\n      }\n    };\n    var request_grid = fetch(url_grid, reqOptions);\n    console.log('feching');\n    request_grid.then(function (r) {\n      return r.json();\n    }).then(function (data) {\n      setData(data);\n    }, function (error) {\n      console.error(error);\n    });\n    var request_shp = fetch(url_shp, reqOptions);\n    console.log('feching');\n    request_shp.then(function (r) {\n      return r.json();\n    }).then(function (data) {\n      setShp(data);\n    }, function (error) {\n      console.error(error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(FeatureGroup, {\n    children: [data.map(function (data) {\n      var myStyleGrid = {\n        color: \"white\",\n        weight: 0,\n        fillOpacity: 0.75,\n        fillColor: 'white'\n      };\n\n      if (data.properties.index < legendData.spei.min + twoDegit) {\n        myStyleGrid.fillColor = '#FFEDA0';\n      } else if (data.properties.index < legendData.spei.min + 2 * twoDegit) {\n        myStyleGrid.fillColor = '#FED976';\n      } else if (data.properties.index < legendData.spei.min + 3 * twoDegit) {\n        myStyleGrid.fillColor = '#FEB24C';\n      } else if (data.properties.index < legendData.spei.min + 4 * twoDegit) {\n        myStyleGrid.fillColor = '#FD8D3C';\n      } else if (data.properties.index < legendData.spei.min + 5 * twoDegit) {\n        myStyleGrid.fillColor = '#FC4E2A';\n      } else if (data.properties.index < legendData.spei.min + 6 * twoDegit) {\n        myStyleGrid.fillColor = '#E31A1C';\n      } else if (data.properties.index < legendData.spei.min + 7 * twoDegit) {\n        myStyleGrid.fillColor = '#BD0026';\n      } else {\n        myStyleGrid.fillColor = '#800026';\n      } // const {features:{properties:{id}}} = shp\n      // var intersection = turf.intersect(data.geometry, shp.features.geometry['coordinates'] )\n      // console.log(intersection);\n\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(GeoJSON, {\n          data: data,\n          style: myStyleGrid,\n          children: /*#__PURE__*/_jsxDEV(Popup, {\n            children: [\" \", Math.round(data.properties.index * 1000) / 1000, \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, _this)\n        }, data.properties.grid_id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, _this);\n    }), /*#__PURE__*/_jsxDEV(GeoJSON, {\n      data: shp\n    }, shp, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this), console.log(props.pName), console.log(url_grid), console.log('return')]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GridData, \"MBtwWRSBKUZvrYE9D8GYy9Ewd64=\");\n\n_c = GridData;\nexport default GridData;\n\nvar _c;\n\n$RefreshReg$(_c, \"GridData\");","map":{"version":3,"names":["GeoJSON","Popup","FeatureGroup","React","useState","useEffect","legendData","turf","GridData","props","data","setData","shp","setShp","url_grid","concat","pName","url_shp","interval","spei","max","min","twoDegit","parseFloat","toFixed","fetchData","console","log","reqOptions","method","headers","request_grid","fetch","then","r","json","error","request_shp","map","myStyleGrid","color","weight","fillOpacity","fillColor","properties","index","Math","round","grid_id"],"sources":["D:/Project/Mix_Project/Project_I/project1/src/components/GridData.jsx"],"sourcesContent":["import {GeoJSON, Popup, FeatureGroup} from 'react-leaflet' \r\nimport React, { useState,useEffect } from 'react'\r\nimport legendData from  './../data/dataLegend'  \r\nimport * as turf from '@turf/turf'\r\n\r\nfunction GridData(props) {\r\n    const [data, setData] = useState([])\r\n    const [shp, setShp] = useState([])\r\n    const url_grid = 'http://127.0.0.1:5000/get_spei/'.concat(props.pName).concat('&1902-02')\r\n    const url_shp = 'http://127.0.0.1:5000/get_province/'.concat(props.pName)\r\n    const interval = (legendData.spei.max - legendData.spei.min)/8\r\n    const twoDegit = parseFloat(interval).toFixed(2)\r\n\r\n    useEffect(()=>{\r\n        setData([])\r\n        fetchData(url_grid, url_shp)\r\n        console.log(url_grid);\r\n    },[props.pName])\r\n\r\n    function fetchData(url_grid,url_shp) {\r\n        const reqOptions ={\r\n          method:\"get\", \r\n          headers:{\"x-access-token\": \"test\"},\r\n        }\r\n        \r\n        let request_grid = fetch(url_grid, reqOptions);\r\n        console.log('feching');\r\n        request_grid\r\n        .then(r => r.json())\r\n        .then(data => {\r\n            setData(data)\r\n        }, (error) => {\r\n            console.error(error);\r\n        });\r\n\r\n        let request_shp = fetch(url_shp, reqOptions);\r\n        console.log('feching');\r\n        request_shp\r\n        .then(r => r.json())\r\n        .then(data => {\r\n            setShp(data)\r\n        }, (error) => {\r\n            console.error(error);\r\n        });\r\n      }\r\n\r\n    return (\r\n    <FeatureGroup>\r\n    \r\n        {data.map(data => {\r\n        var myStyleGrid = {\r\n            color: \"white\",\r\n            weight: 0,\r\n            fillOpacity: 0.75,\r\n            fillColor: 'white',\r\n        }\r\n        if(data.properties.index < legendData.spei.min + twoDegit){\r\n            myStyleGrid.fillColor = '#FFEDA0'\r\n        }else if(data.properties.index < legendData.spei.min + 2*twoDegit){\r\n            myStyleGrid.fillColor = '#FED976'\r\n        }else if(data.properties.index < legendData.spei.min + 3*twoDegit){\r\n            myStyleGrid.fillColor = '#FEB24C'\r\n        }else if(data.properties.index < legendData.spei.min + 4*twoDegit){\r\n            myStyleGrid.fillColor = '#FD8D3C'\r\n        }else if(data.properties.index < legendData.spei.min + 5*twoDegit){\r\n            myStyleGrid.fillColor = '#FC4E2A'\r\n        }else if(data.properties.index < legendData.spei.min + 6*twoDegit){\r\n            myStyleGrid.fillColor = '#E31A1C'\r\n        }else if(data.properties.index < legendData.spei.min + 7*twoDegit){\r\n            myStyleGrid.fillColor = '#BD0026'\r\n        }else {\r\n            myStyleGrid.fillColor = '#800026'\r\n        }\r\n        // const {features:{properties:{id}}} = shp\r\n        // var intersection = turf.intersect(data.geometry, shp.features.geometry['coordinates'] )\r\n        // console.log(intersection);\r\n        \r\n        return (\r\n        <div>\r\n            <GeoJSON key={data.properties.grid_id}  data={data} style={myStyleGrid}>\r\n                <Popup> {Math.round(data.properties.index*1000)/1000} </Popup>\r\n            </GeoJSON>\r\n            \r\n        </div>\r\n        )\r\n\r\n        })}\r\n        <GeoJSON key={shp} data={shp}>\r\n\r\n        </GeoJSON>\r\n        {console.log(props.pName)}\r\n        {console.log(url_grid)}\r\n        {console.log('return')}\r\n\r\n    </FeatureGroup> \r\n  )\r\n}\r\n\r\nexport default GridData"],"mappings":";;;;;AAAA,SAAQA,OAAR,EAAiBC,KAAjB,EAAwBC,YAAxB,QAA2C,eAA3C;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,OAAOC,UAAP,MAAwB,sBAAxB;AACA,OAAO,KAAKC,IAAZ,MAAsB,YAAtB;;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EAAA;;EAAA;;EACrB,gBAAwBL,QAAQ,CAAC,EAAD,CAAhC;EAAA;EAAA,IAAOM,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAAsBP,QAAQ,CAAC,EAAD,CAA9B;EAAA;EAAA,IAAOQ,GAAP;EAAA,IAAYC,MAAZ;;EACA,IAAMC,QAAQ,GAAG,kCAAkCC,MAAlC,CAAyCN,KAAK,CAACO,KAA/C,EAAsDD,MAAtD,CAA6D,UAA7D,CAAjB;EACA,IAAME,OAAO,GAAG,sCAAsCF,MAAtC,CAA6CN,KAAK,CAACO,KAAnD,CAAhB;EACA,IAAME,QAAQ,GAAG,CAACZ,UAAU,CAACa,IAAX,CAAgBC,GAAhB,GAAsBd,UAAU,CAACa,IAAX,CAAgBE,GAAvC,IAA4C,CAA7D;EACA,IAAMC,QAAQ,GAAGC,UAAU,CAACL,QAAD,CAAV,CAAqBM,OAArB,CAA6B,CAA7B,CAAjB;EAEAnB,SAAS,CAAC,YAAI;IACVM,OAAO,CAAC,EAAD,CAAP;IACAc,SAAS,CAACX,QAAD,EAAWG,OAAX,CAAT;IACAS,OAAO,CAACC,GAAR,CAAYb,QAAZ;EACH,CAJQ,EAIP,CAACL,KAAK,CAACO,KAAP,CAJO,CAAT;;EAMA,SAASS,SAAT,CAAmBX,QAAnB,EAA4BG,OAA5B,EAAqC;IACjC,IAAMW,UAAU,GAAE;MAChBC,MAAM,EAAC,KADS;MAEhBC,OAAO,EAAC;QAAC,kBAAkB;MAAnB;IAFQ,CAAlB;IAKA,IAAIC,YAAY,GAAGC,KAAK,CAAClB,QAAD,EAAWc,UAAX,CAAxB;IACAF,OAAO,CAACC,GAAR,CAAY,SAAZ;IACAI,YAAY,CACXE,IADD,CACM,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACC,IAAF,EAAJ;IAAA,CADP,EAECF,IAFD,CAEM,UAAAvB,IAAI,EAAI;MACVC,OAAO,CAACD,IAAD,CAAP;IACH,CAJD,EAIG,UAAC0B,KAAD,EAAW;MACVV,OAAO,CAACU,KAAR,CAAcA,KAAd;IACH,CAND;IAQA,IAAIC,WAAW,GAAGL,KAAK,CAACf,OAAD,EAAUW,UAAV,CAAvB;IACAF,OAAO,CAACC,GAAR,CAAY,SAAZ;IACAU,WAAW,CACVJ,IADD,CACM,UAAAC,CAAC;MAAA,OAAIA,CAAC,CAACC,IAAF,EAAJ;IAAA,CADP,EAECF,IAFD,CAEM,UAAAvB,IAAI,EAAI;MACVG,MAAM,CAACH,IAAD,CAAN;IACH,CAJD,EAIG,UAAC0B,KAAD,EAAW;MACVV,OAAO,CAACU,KAAR,CAAcA,KAAd;IACH,CAND;EAOD;;EAEH,oBACA,QAAC,YAAD;IAAA,WAEK1B,IAAI,CAAC4B,GAAL,CAAS,UAAA5B,IAAI,EAAI;MAClB,IAAI6B,WAAW,GAAG;QACdC,KAAK,EAAE,OADO;QAEdC,MAAM,EAAE,CAFM;QAGdC,WAAW,EAAE,IAHC;QAIdC,SAAS,EAAE;MAJG,CAAlB;;MAMA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsBC,QAAjD,EAA0D;QACtDiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFD,MAEM,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA,IAAGjC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAwBvC,UAAU,CAACa,IAAX,CAAgBE,GAAhB,GAAsB,IAAEC,QAAnD,EAA4D;QAC9DiB,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAFK,MAEA;QACFJ,WAAW,CAACI,SAAZ,GAAwB,SAAxB;MACH,CAvBiB,CAwBlB;MACA;MACA;;;MAEA,oBACA;QAAA,uBACI,QAAC,OAAD;UAAwC,IAAI,EAAEjC,IAA9C;UAAoD,KAAK,EAAE6B,WAA3D;UAAA,uBACI,QAAC,KAAD;YAAA,gBAASO,IAAI,CAACC,KAAL,CAAWrC,IAAI,CAACkC,UAAL,CAAgBC,KAAhB,GAAsB,IAAjC,IAAuC,IAAhD;UAAA;YAAA;YAAA;YAAA;UAAA;QADJ,GAAcnC,IAAI,CAACkC,UAAL,CAAgBI,OAA9B;UAAA;UAAA;UAAA;QAAA;MADJ;QAAA;QAAA;QAAA;MAAA,SADA;IASC,CArCA,CAFL,eAwCI,QAAC,OAAD;MAAmB,IAAI,EAAEpC;IAAzB,GAAcA,GAAd;MAAA;MAAA;MAAA;IAAA,QAxCJ,EA2CKc,OAAO,CAACC,GAAR,CAAYlB,KAAK,CAACO,KAAlB,CA3CL,EA4CKU,OAAO,CAACC,GAAR,CAAYb,QAAZ,CA5CL,EA6CKY,OAAO,CAACC,GAAR,CAAY,QAAZ,CA7CL;EAAA;IAAA;IAAA;IAAA;EAAA,QADA;AAkDH;;GA3FQnB,Q;;KAAAA,Q;AA6FT,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}